<!DOCTYPE html>
<html>
<head>
  <title>Thromboembolism Risk Calculator</title>
  <style>
    body { font-family: Arial, sans-serif; margin: 40px; }
    label { display: block; margin-top: 10px; }
    input, button { padding: 8px; margin-top: 5px; }
    #result { margin-top: 20px; font-weight: bold; }
  </style>
</head>
<body>
  <h2>Thromboembolism Risk Calculator</h2>

  <h3>CHA₂DS₂-VASc Components</h3>

  <label><input type="checkbox" id="chf"> Congestive Heart Failure (1)</label>
  <label><input type="checkbox" id="htn"> Hypertension (1)</label>
  <label><input type="checkbox" id="dm"> Diabetes Mellitus (1)</label>
  <label><input type="checkbox" id="stroke"> Prior Stroke/TIA/Thromboembolism (2)</label>
  <label><input type="checkbox" id="vascular"> Vascular Disease (1)</label>
  <label>Age:
    <select id="age">
      <option value="0">&lt;65</option>
      <option value="1">65–74 (1)</option>
      <option value="2">≥75 (2)</option>
    </select>
  </label>
  <label>Sex:
    <select id="sex">
      <option value="0">Male</option>
      <option value="1">Female (1)</option>
    </select>
  </label>

  <label for="days">Days Since Procedure:</label>
  <input type="number" id="days" min="0">

  <button onclick="calculateRisk()">Calculate Risk</button>

  <div id="result"></div>

  <script>
    const coefficients = [
      0.000410958904109589,
      0.00232876712328767,
      0.00712328767123288,
      0.0136986301369863,
      0.0138356164383562,
      0.0213698630136986,
      0.0279452054794521,
      0.039041095890411,
      0.043972602739726,
      0.164794520547945
    ];

    function calculateRisk() {
      let score = 0;

      if (document.getElementById('chf').checked) score += 1;
      if (document.getElementById('htn').checked) score += 1;
      if (document.getElementById('dm').checked) score += 1;
      if (document.getElementById('stroke').checked) score += 2;
      if (document.getElementById('vascular').checked) score += 1;

      score += parseInt(document.getElementById('age').value);
      score += parseInt(document.getElementById('sex').value);

      const days = parseFloat(document.getElementById('days').value);
      const resultDiv = document.getElementById('result');

      if (isNaN(days) || days < 0) {
        resultDiv.textContent = 'Please enter valid inputs.';
        return;
      }

      const coefficient = coefficients[score];
      const risk = (coefficient * days).toFixed(3);

      resultDiv.textContent =
        `CHA₂DS₂-VASc Score: ${score} | Estimated thromboembolic risk: ${risk}%`;
    }
  </script>
</body>
</html>
